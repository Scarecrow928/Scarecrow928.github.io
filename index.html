<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">

<script class="next-config" data-name="main" type="application/json">{&quot;hostname&quot;:&quot;scarecrow928.github.io&quot;,&quot;root&quot;:&quot;&#x2F;&quot;,&quot;images&quot;:&quot;&#x2F;images&quot;,&quot;scheme&quot;:&quot;Pisces&quot;,&quot;version&quot;:&quot;8.4.0&quot;,&quot;exturl&quot;:false,&quot;sidebar&quot;:{&quot;position&quot;:&quot;left&quot;,&quot;display&quot;:&quot;post&quot;,&quot;padding&quot;:18,&quot;offset&quot;:12},&quot;copycode&quot;:true,&quot;bookmark&quot;:{&quot;enable&quot;:false,&quot;color&quot;:&quot;#222&quot;,&quot;save&quot;:&quot;auto&quot;},&quot;fancybox&quot;:false,&quot;mediumzoom&quot;:false,&quot;lazyload&quot;:false,&quot;pangu&quot;:false,&quot;comments&quot;:{&quot;style&quot;:&quot;tabs&quot;,&quot;active&quot;:null,&quot;storage&quot;:true,&quot;lazyload&quot;:false,&quot;nav&quot;:null},&quot;motion&quot;:{&quot;enable&quot;:true,&quot;async&quot;:false,&quot;transition&quot;:{&quot;post_block&quot;:&quot;fadeIn&quot;,&quot;post_header&quot;:&quot;fadeInDown&quot;,&quot;post_body&quot;:&quot;fadeInDown&quot;,&quot;coll_header&quot;:&quot;fadeInLeft&quot;,&quot;sidebar&quot;:&quot;fadeInUp&quot;}},&quot;prism&quot;:false,&quot;i18n&quot;:{&quot;placeholder&quot;:&quot;æœç´¢...&quot;,&quot;empty&quot;:&quot;æ²¡æœ‰æ‰¾åˆ°ä»»ä½•æœç´¢ç»“æœï¼š${query}&quot;,&quot;hits_time&quot;:&quot;æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœï¼ˆç”¨æ—¶ ${time} æ¯«ç§’ï¼‰&quot;,&quot;hits&quot;:&quot;æ‰¾åˆ° ${hits} ä¸ªæœç´¢ç»“æœ&quot;}}</script>
<meta property="og:type" content="website">
<meta property="og:title" content="ğŸ‘">
<meta property="og:url" content="https://scarecrow928.github.io/index.html">
<meta property="og:site_name" content="ğŸ‘">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Scarecrow">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://scarecrow928.github.io/">



<script class="next-config" data-name="page" type="application/json">{&quot;sidebar&quot;:&quot;&quot;,&quot;isHome&quot;:true,&quot;isPost&quot;:false,&quot;lang&quot;:&quot;zh-CN&quot;,&quot;comments&quot;:&quot;&quot;,&quot;permalink&quot;:&quot;&quot;,&quot;path&quot;:&quot;index.html&quot;,&quot;title&quot;:&quot;&quot;}</script>

<script class="next-config" data-name="calendar" type="application/json">&quot;&quot;</script>
<title>ğŸ‘</title><script src="/js/config.js"></script>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ " role="button">
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">ğŸ‘</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>







</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Scarecrow</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">17</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">åˆ†ç±»</span>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">æ ‡ç­¾</span>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/scarecrow928" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;scarecrow928" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="è¿”å›é¡¶éƒ¨">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://scarecrow928.github.io/other/os/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Scarecrow">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ğŸ‘">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/other/os/" class="post-title-link" itemprop="url">æ“ä½œç³»ç»Ÿç›¸å…³</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2021-07-31 10:29:47" itemprop="dateCreated datePublished" datetime="2021-07-31T10:29:47+08:00">2021-07-31</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">æ›´æ–°äº</span>
        <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-08-15 15:39:56" itemprop="dateModified" datetime="2021-08-15T15:39:56+08:00">2021-08-15</time>
      </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="è™šæ‹Ÿå†…å­˜"><a href="#è™šæ‹Ÿå†…å­˜" class="headerlink" title="è™šæ‹Ÿå†…å­˜"></a>è™šæ‹Ÿå†…å­˜</h2><ul>
<li>CPUé€šè¿‡è¿ç»­çš„è™šæ‹Ÿåœ°å€è®¿é—®ç‰©ç†åœ°å€</li>
<li>è™šæ‹Ÿå†…å­˜å¤§å°å¯ä»¥æ¯”å½“å‰ç©ºé—²ç‰©ç†å†…å­˜å¤§</li>
<li>ä¸åŒè¿›ç¨‹ä¹‹é—´é€šè¿‡è™šæ‹Ÿå†…å­˜éš”ç¦»</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://scarecrow928.github.io/cpp/stl/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Scarecrow">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ğŸ‘">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/cpp/stl/" class="post-title-link" itemprop="url">STLç›¸å…³</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2021-07-30 07:12:35" itemprop="dateCreated datePublished" datetime="2021-07-30T07:12:35+08:00">2021-07-30</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">æ›´æ–°äº</span>
        <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-08-15 15:39:56" itemprop="dateModified" datetime="2021-08-15T15:39:56+08:00">2021-08-15</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/cpp/" itemprop="url" rel="index"><span itemprop="name">cpp</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="sortä½¿ç”¨çš„æ’åºç®—æ³•"><a href="#sortä½¿ç”¨çš„æ’åºç®—æ³•" class="headerlink" title="sortä½¿ç”¨çš„æ’åºç®—æ³•"></a><code>sort</code>ä½¿ç”¨çš„æ’åºç®—æ³•</h2><ul>
<li>æ•°æ®é‡å¤§æ—¶ä½¿ç”¨å¿«é€Ÿæ’åº</li>
<li>æ•°æ®é‡å°æ—¶ä½¿ç”¨æ’å…¥æ’åº</li>
<li>é€’å½’å±‚æ•°å¾ˆæ·±æ—¶ä½¿ç”¨å †æ’åºã€‚é€’å½’å±‚æ•°æ·±å¯èƒ½æ—¶éšæœºåˆ†åŒºä¸è§„å¾‹å¼•èµ·çš„ã€‚</li>
</ul>
<h2 id="å››ç§ç±»å‹è½¬æ¢"><a href="#å››ç§ç±»å‹è½¬æ¢" class="headerlink" title="å››ç§ç±»å‹è½¬æ¢"></a>å››ç§ç±»å‹è½¬æ¢</h2><h3 id="static-cast"><a href="#static-cast" class="headerlink" title="static_cast"></a><code>static_cast</code></h3><ul>
<li>åŸºç¡€æ•°æ®ç±»å‹ä¹‹é—´çš„è½¬æ¢</li>
<li>ä»»æ„ç±»å‹æŒ‡é’ˆä¸<code>void *</code>ä¹‹é—´çš„è½¬æ¢</li>
<li>çˆ¶å­ç±»ä¹‹é—´çš„è½¬æ¢ï¼Œæ— ç±»å‹æ£€æŸ¥</li>
</ul>
<h3 id="const-cast"><a href="#const-cast" class="headerlink" title="const_cast"></a><code>const_cast</code></h3><p>éå¸¸é‡è½¬æ¢ä¸ºå¸¸é‡</p>
<h3 id="dynamic-cast"><a href="#dynamic-cast" class="headerlink" title="dynamic_cast"></a><code>dynamic_cast</code></h3><p>çˆ¶å­ç±»ä¹‹é—´è½¬æ¢ï¼Œæœ‰ç±»å‹æ£€æŸ¥ã€‚</p>
<h3 id="reinterpreted-cast"><a href="#reinterpreted-cast" class="headerlink" title="reinterpreted_cast"></a><code>reinterpreted_cast</code></h3><p>ä»»æ„ç±»å‹è½¬æ¢ï¼Œä¸æŠ›å‡ºå¼‚å¸¸</p>
<h2 id="å››ç§æ™ºèƒ½æŒ‡é’ˆ"><a href="#å››ç§æ™ºèƒ½æŒ‡é’ˆ" class="headerlink" title="å››ç§æ™ºèƒ½æŒ‡é’ˆ"></a>å››ç§æ™ºèƒ½æŒ‡é’ˆ</h2><h3 id="auto-ptr"><a href="#auto-ptr" class="headerlink" title="auto_ptr"></a><code>auto_ptr</code></h3><p>C++11ä¸­å·²å¼ƒç”¨</p>
<h3 id="unique-ptr"><a href="#unique-ptr" class="headerlink" title="unique_ptr"></a><code>unique_ptr</code></h3><p>åªèƒ½æœ‰ä¸€ä¸ªæŒ‡é’ˆæœ‰å¯¹è±¡æ‰€æœ‰æƒã€‚ç”¨æ„é€ å‡½æ•°æˆ–<code>std::move()</code>æ¥è½¬ç§»æ‰€æœ‰æƒ</p>
<h3 id="shared-ptr"><a href="#shared-ptr" class="headerlink" title="shared_ptr"></a><code>shared_ptr</code></h3><p>æœ‰å¤šä¸ªæŒ‡é’ˆå¯ä»¥æœ‰å¯¹è±¡æ‰€æœ‰æƒï¼Œå½“æ‰€æœ‰æŒ‡é’ˆéƒ½é”€æ¯æ—¶ï¼Œé”€æ¯å¯¹è±¡</p>
<h3 id="weak-ptr"><a href="#weak-ptr" class="headerlink" title="weak_ptr"></a><code>weak_ptr</code></h3><p>å¿…é¡»é…åˆ<code>shared_ptr</code>ä½¿ç”¨ï¼Œèƒ½è®¿é—®å¯¹è±¡ï¼Œä½†ä¸å…·å¤‡æ‰€æœ‰æƒï¼Œè§£å†³äº†å¾ªç¯å¼•ç”¨é—®é¢˜</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://scarecrow928.github.io/cpp/new/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Scarecrow">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ğŸ‘">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/cpp/new/" class="post-title-link" itemprop="url">newè¿ç®—ç¬¦</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2021-07-01 08:11:35" itemprop="dateCreated datePublished" datetime="2021-07-01T08:11:35+08:00">2021-07-01</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">æ›´æ–°äº</span>
        <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-08-15 15:39:56" itemprop="dateModified" datetime="2021-08-15T15:39:56+08:00">2021-08-15</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/cpp/" itemprop="url" rel="index"><span itemprop="name">cpp</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="è¿è¡ŒåŸç†"><a href="#è¿è¡ŒåŸç†" class="headerlink" title="è¿è¡ŒåŸç†"></a>è¿è¡ŒåŸç†</h2><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">A *p = <span class="keyword">new</span> <span class="built_in">A</span>();</span><br><span class="line"><span class="keyword">delete</span> p;</span><br></pre></td></tr></table></figure>
<p>è°ƒç”¨é¡ºåºï¼š</p>
<ol>
<li><code>operator new</code>ç”³è¯·ç©ºé—´ï¼Œä¸€èˆ¬STLå®ç°ä¸­<code>new</code>ç”³è¯·å †å†…å­˜ï¼Œå¯é‡è½½ä¸ºè‡ªå®šä¹‰çš„ç©ºé—´</li>
<li>è°ƒç”¨Açš„<code>constructor A()</code>ï¼Œåˆå§‹åŒ–å†…å­˜</li>
<li>è°ƒç”¨Açš„<code>deconstructor ~A()</code>ï¼Œææ„å†…å­˜</li>
<li><code>operator delete</code>é‡Šæ”¾ç”±<code>new</code>ç”³è¯·çš„ç©ºé—´</li>
</ol>
<h2 id="newä¸malloc"><a href="#newä¸malloc" class="headerlink" title="newä¸malloc()"></a><code>new</code>ä¸<code>malloc()</code></h2><a href="/apue/malloc/" title="[åŒºåˆ«]">[åŒºåˆ«]</a>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://scarecrow928.github.io/unp/tcp/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Scarecrow">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ğŸ‘">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/unp/tcp/" class="post-title-link" itemprop="url">TCPåè®®</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2021-06-27 07:12:22" itemprop="dateCreated datePublished" datetime="2021-06-27T07:12:22+08:00">2021-06-27</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">æ›´æ–°äº</span>
        <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-08-15 15:39:56" itemprop="dateModified" datetime="2021-08-15T15:39:56+08:00">2021-08-15</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/unp/" itemprop="url" rel="index"><span itemprop="name">unp</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="TCPåè®®"><a href="#TCPåè®®" class="headerlink" title="TCPåè®®"></a>TCPåè®®</h1><h2 id="å»ºç«‹è¿æ¥"><a href="#å»ºç«‹è¿æ¥" class="headerlink" title="å»ºç«‹è¿æ¥"></a>å»ºç«‹è¿æ¥</h2><p>å»ºç«‹è¿æ¥ä¸€èˆ¬ç”±å®¢æˆ·ç«¯å‘èµ·ï¼Œå…±3æ­¥ï¼š</p>
<ul>
<li>å®¢æˆ·ç«¯å‘é€SYN j</li>
<li>æœåŠ¡ç«¯å›å¤SYN k, ACK j +1ï¼Œå®¢æˆ·ç«¯æ”¶åˆ°åå®¢æˆ·ç«¯è®¤ä¸ºè¿æ¥å»ºç«‹</li>
<li>å®¢æˆ·ç«¯å›å¤ ACK k + 1ï¼ŒæœåŠ¡ç«¯æ”¶åˆ°åæœåŠ¡ç«¯è®¤ä¸ºè¿æ¥å»ºç«‹</li>
</ul>
<p>å›¾ç‰‡æ¥è‡ªã€ŠUNPã€‹<br><img src="/images/tcp_connect.jpg"></p>
<h2 id="ç»ˆæ­¢è¿æ¥"><a href="#ç»ˆæ­¢è¿æ¥" class="headerlink" title="ç»ˆæ­¢è¿æ¥"></a>ç»ˆæ­¢è¿æ¥</h2><p>ç»ˆæ­¢è¿æ¥ä¸¤ç«¯éƒ½å¯ä»¥ä¸»åŠ¨å‘èµ·ï¼Œå‡è®¾Aä¸»åŠ¨å‘Bå‘èµ·ï¼Œå…±4æ­¥ï¼š</p>
<ul>
<li>Aå‘é€FIN M</li>
<li>Bå›å¤ACK M + 1ï¼ŒBå…³é—­è¯»ï¼ŒAå…³é—­å†™</li>
<li>Bå‘é€FIN N</li>
<li>Aå›å¤ACK N + 1 Bå…³é—­å†™ï¼ŒAå…³é—­è¯»</li>
</ul>
<p>å›¾ç‰‡æ¥è‡ªã€ŠUNPã€‹<br><img src="/images/tcp_close.jpg"></p>
<h2 id="çŠ¶æ€è½¬ç§»"><a href="#çŠ¶æ€è½¬ç§»" class="headerlink" title="çŠ¶æ€è½¬ç§»"></a>çŠ¶æ€è½¬ç§»</h2><h3 id="å®¢æˆ·ç«¯"><a href="#å®¢æˆ·ç«¯" class="headerlink" title="å®¢æˆ·ç«¯"></a>å®¢æˆ·ç«¯</h3><p>åˆå§‹ä¸ºCLOSED</p>
<ol>
<li>SYN_SENTï¼š å‘é€SYN</li>
<li>ESTABLISHEDï¼šæ”¶åˆ°ACKï¼Œå‘é€SYN ACK</li>
<li>FIN_WAIT_1ï¼šå‘é€FINï¼Œä¸»åŠ¨å…³é—­</li>
<li>FIN_WAIT_2ï¼šæ”¶åˆ°ACK</li>
<li>TIME_WAITï¼šæ”¶åˆ°FINï¼Œå‘é€ACK</li>
<li>CLOSEDï¼šè¶…æ—¶</li>
</ol>
<h3 id="æœåŠ¡ç«¯"><a href="#æœåŠ¡ç«¯" class="headerlink" title="æœåŠ¡ç«¯"></a>æœåŠ¡ç«¯</h3><p>åˆå§‹ä¸ºCLOSED</p>
<ol>
<li>LISTENï¼šè¢«åŠ¨æ‰“å¼€</li>
<li>SYN_RCVDï¼šæ”¶åˆ°SYNï¼Œå‘é€ACK</li>
<li>ESTABLISHEDï¼šå‘é€SYN ACK</li>
<li>CLOSE_WAITï¼šæ”¶åˆ°FINï¼Œå‘é€ACKï¼Œè¢«åŠ¨å…³é—­</li>
<li>LAST_ACKï¼šå‘é€FIN</li>
<li>CLOSEDï¼šæ”¶åˆ°ACK</li>
</ol>
<p>å›¾ç‰‡æ¥è‡ªã€ŠUNPã€‹<br><img src="/images/tcp_status.jpg"></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://scarecrow928.github.io/apue/ipc/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Scarecrow">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ğŸ‘">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/apue/ipc/" class="post-title-link" itemprop="url">è¿›ç¨‹é—´é€šä¿¡</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2021-06-23 08:24:05" itemprop="dateCreated datePublished" datetime="2021-06-23T08:24:05+08:00">2021-06-23</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">æ›´æ–°äº</span>
        <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-08-15 15:39:56" itemprop="dateModified" datetime="2021-08-15T15:39:56+08:00">2021-08-15</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/apue/" itemprop="url" rel="index"><span itemprop="name">apue</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="è¿›ç¨‹é—´é€šä¿¡"><a href="#è¿›ç¨‹é—´é€šä¿¡" class="headerlink" title="è¿›ç¨‹é—´é€šä¿¡"></a>è¿›ç¨‹é—´é€šä¿¡</h1><p>æœ‰äº”ç§è¿›ç¨‹é—´é€šä¿¡çš„æ–¹å¼ï¼š</p>
<ul>
<li>ç®¡é“</li>
<li>FIFO</li>
<li>æ¶ˆæ¯é˜Ÿåˆ—</li>
<li>ä¿¡å·é‡</li>
<li>å…±äº«å­˜å‚¨å™¨</li>
</ul>
<h1 id="ç®¡é“"><a href="#ç®¡é“" class="headerlink" title="ç®¡é“"></a>ç®¡é“</h1><p>ç®¡é“æ˜¯è¿›ç¨‹é—´é€šä¿¡çš„ä¸€ç§æ–¹å¼ï¼Œæ™®é€šçš„ç®¡é“åªèƒ½åœ¨çˆ¶è¿›ç¨‹ä¸å­è¿›ç¨‹ä¹‹é—´é€šä¿¡ã€‚</p>
<h2 id="pipe"><a href="#pipe" class="headerlink" title="pipe"></a>pipe</h2><p><code>pipe</code>éœ€è¦ä¼ å…¥ä¸¤ä¸ªæ–‡ä»¶æè¿°ç¬¦<code>fd</code>ï¼Œå…¶ä¸­<code>pipefd[0]</code>ç”¨äºè¯»ï¼Œ<code>pipefd[1]</code>ç”¨äºå†™ã€‚</p>
<p>çˆ¶è¿›ç¨‹<code>fork</code>å­è¿›ç¨‹åï¼Œå†…å­˜ä¹Ÿè¢«å¤åˆ¶äº†ä¸€ä»½ï¼Œå·²æ‰“å¼€çš„ç®¡é“ä»ç„¶æ˜¯èƒ½ç›¸äº’é€šä¿¡çš„ã€‚</p>
<p>ä¸€èˆ¬<code>fork</code>ä¹‹åï¼Œè¿›ç¨‹å…³é—­ä¸¤ä¸ª<code>fd</code>ä¸­çš„ä¸€ä¸ªï¼Œç•™ä¸‹å¦ä¸€ä¸ªç”¨äºé€šä¿¡ã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">pipe</span><span class="params">(<span class="keyword">int</span> pipefd[<span class="number">2</span>])</span></span>;</span><br></pre></td></tr></table></figure>
<h2 id="popen-pclose"><a href="#popen-pclose" class="headerlink" title="popen pclose"></a>popen pclose</h2><p>ç”¨äºæ‰§è¡Œä¸€ä¸ªshellå‘½ä»¤ï¼ŒåŒæ—¶è¿”å›çš„æ–‡ä»¶æè¿°ç¬¦è¿æ¥åˆ°é‚£ä¸ªshellå‘½ä»¤çš„<code>stdin</code>æˆ–<code>stdout</code>ã€‚</p>
<p>è‹¥<code>type = &quot;r&quot;</code>ï¼Œåˆ™è¿æ¥åˆ°å‘½ä»¤çš„<code>stdout</code>ï¼›<code>type = &quot;w&quot;</code>åˆ™è¿æ¥åˆ°<code>stdin</code>ã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function">FILE *<span class="title">popen</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *command, <span class="keyword">const</span> <span class="keyword">char</span> *type)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">pclose</span><span class="params">(FILE *stream)</span></span>;</span><br></pre></td></tr></table></figure>

<p>unixä¸­è°ƒç”¨<code>date</code>å‘½ä»¤ï¼Œå¯ä»¥è·å–å½“å‰æ—¶é—´ï¼Œå¹¶æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼š</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">string date_string;</span><br><span class="line"><span class="keyword">char</span> buf[<span class="number">128</span>];</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line">FILE *pf = <span class="built_in">popen</span>(<span class="string">&quot;date +%c&quot;</span>, <span class="string">&quot;r&quot;</span>);</span><br><span class="line"><span class="keyword">while</span> ((n = <span class="built_in">fread</span>(buf, <span class="built_in"><span class="keyword">sizeof</span></span>(<span class="keyword">char</span>), <span class="number">127</span>, pf)) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">    buf[n] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">    date_string += <span class="built_in">string</span>(buf);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">fclose</span>(pf);</span><br><span class="line"><span class="comment">// date_string æœ€åä¼šæœ‰ä¸€ä¸ªæ¢è¡Œç¬¦&#x27;\n&#x27;</span></span><br><span class="line">cout &lt;&lt; date_string;</span><br><span class="line"><span class="comment">// Fri Jun 25 17:31:24 2021</span></span><br></pre></td></tr></table></figure>

<h1 id="FIFOï¼ˆå‘½åç®¡é“ï¼‰"><a href="#FIFOï¼ˆå‘½åç®¡é“ï¼‰" class="headerlink" title="FIFOï¼ˆå‘½åç®¡é“ï¼‰"></a>FIFOï¼ˆå‘½åç®¡é“ï¼‰</h1><p>å‘½åç®¡é“å¯ç”¨äºä¸¤ä¸ªæ— å…³çš„è¿›ç¨‹é—´é€šä¿¡ã€‚</p>
<p>æœºåˆ¶åŒpipeï¼Œ<code>pathname</code>æŒ‡å®šäº†FIFOçš„è·¯å¾„ï¼Œä¹Ÿæ˜¯å‘½åç®¡é“çš„åç§°ã€‚</p>
<p><code>mode</code>ä¸ç³»ç»Ÿè°ƒç”¨<code>open</code>ä¸€æ ·ï¼Œå¯æŒ‡å®šè¯»å†™ç­‰ã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/stat.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">mkfifo</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *pathname, <span class="keyword">mode_t</span> mode)</span></span>;</span><br></pre></td></tr></table></figure>
<h1 id="æ¶ˆæ¯é˜Ÿåˆ—"><a href="#æ¶ˆæ¯é˜Ÿåˆ—" class="headerlink" title="æ¶ˆæ¯é˜Ÿåˆ—"></a>æ¶ˆæ¯é˜Ÿåˆ—</h1><p>æ¶ˆæ¯çš„é“¾è¡¨ï¼Œç”±å†…æ ¸ç»´æŠ¤ï¼Œæœ‰æœ€å¤§å®¹é‡</p>
<h1 id="ä¿¡å·é‡"><a href="#ä¿¡å·é‡" class="headerlink" title="ä¿¡å·é‡"></a>ä¿¡å·é‡</h1><p>ä¿¡å·é‡ä¿è¯ä¸€å®šæ•°é‡çš„è¿›ç¨‹èƒ½å¤Ÿè®¿é—®ä¸´ç•ŒåŒºã€‚äºŒå…ƒä¿¡å·é‡ç±»ä¼¼äº’æ–¥é”ï¼Œä¸è¿‡æ˜¯åœ¨è¿›ç¨‹é—´äº’æ–¥ã€‚</p>
<p>ä¿¡å·é‡ç”±å†…æ ¸ç»´æŠ¤ã€‚</p>
<h1 id="å…±äº«å­˜å‚¨å™¨"><a href="#å…±äº«å­˜å‚¨å™¨" class="headerlink" title="å…±äº«å­˜å‚¨å™¨"></a>å…±äº«å­˜å‚¨å™¨</h1><p>ä¹Ÿå«å…±äº«å†…å­˜ã€‚å…±äº«å†…å­˜æ•ˆç‡éå¸¸é«˜ï¼Œå› ä¸ºå†…å­˜è®¿é—®é€Ÿåº¦ä¸€èˆ¬å¾ˆå¿«ã€‚è¿›ç¨‹é—´å…±äº«å†…å­˜ä¹Ÿä¼šäº§ç”Ÿè¯»å†™åŒæ­¥é—®é¢˜ï¼Œå› æ­¤éœ€è¦ä¿¡å·é‡æ¥ä¿æŠ¤å…±äº«å†…å­˜ã€‚</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://scarecrow928.github.io/apue/iomultiplexing/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Scarecrow">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ğŸ‘">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/apue/iomultiplexing/" class="post-title-link" itemprop="url">IOå¤šè·¯å¤ç”¨</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2021-06-21 11:04:24" itemprop="dateCreated datePublished" datetime="2021-06-21T11:04:24+08:00">2021-06-21</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">æ›´æ–°äº</span>
        <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-08-15 15:39:56" itemprop="dateModified" datetime="2021-08-15T15:39:56+08:00">2021-08-15</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/apue/" itemprop="url" rel="index"><span itemprop="name">apue</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="select"><a href="#select" class="headerlink" title="select"></a>select</h2><p><code>select</code>å‡½æ•°ï¼Œå¯ä»¥ä¼ å…¥æƒ³è§‚å¯Ÿçš„<code>fd_set</code>ç±»å‹çš„ä¸‰ä¸ªé›†åˆï¼Œåˆ†åˆ«è¡¨ç¤ºè¯»ã€å†™ã€å¼‚å¸¸çš„fdã€‚<code>nfds</code>è¡¨ç¤ºç›‘å¬çš„æœ€å¤§fdå€¼+1ï¼Œå¯ä»¥è®¾ç½®ä¸º<code>FD_SETSIZE</code>è¡¨ç¤ºæœ€å¤§å€¼ã€‚</p>
<p>è¿”å›å·²å°±ç»ªçš„fdæ•°é‡ï¼Œå®ƒæ˜¯ä¸‰ä¸ªé›†åˆä¸­å·²å°±ç»ªçš„fdæ•°ä¹‹å’Œã€‚</p>
<p>selectå¯¹äº<code>n</code>ä¸ªfdï¼Œå…¶æ—¶é—´å¤æ‚åº¦ä¸º<code>O(n)</code></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/select.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">select</span><span class="params">(<span class="keyword">int</span> nfds, fd_set *readfds, fd_set *writefds,</span></span></span><br><span class="line"><span class="params"><span class="function">            fd_set *exceptfds, struct timeval *timeout)</span></span>;</span><br></pre></td></tr></table></figure>

<h2 id="poll"><a href="#poll" class="headerlink" title="poll"></a>poll</h2><p><code>poll</code>å‡½æ•°ä¸<code>select</code>ç±»ä¼¼ï¼Œä¸è¿‡ä¸åˆ†æˆ3ä¸ªfdé›†åˆï¼Œè€Œåˆå¹¶æˆä¸€ä¸ª<code>pollfd</code>ç»“æ„ã€‚<code>event</code>è¡¨ç¤ºå…³å¿ƒçš„äº‹ä»¶ï¼Œä¾‹å¦‚è¯»ã€å†™ã€‚<code>revent</code>è¡¨ç¤ºè¿”å›çš„äº‹ä»¶ï¼Œå…¶ä¸­é™¤äº†åŒ…å«å…³å¿ƒçš„æ—¶é—´å¤–ï¼Œè¿˜åŒ…å«äº†fdæ˜¯å¦å‡ºé”™ã€æŒ‚æ–­ã€æ˜¯å¦æ‰“å¼€ä¸€ä¸ªæ–‡ä»¶ç­‰ã€‚</p>
<p><code>poll</code>åŒæ ·å…·æœ‰<code>O(n)</code>æ—¶é—´å¤æ‚åº¦</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;poll.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">poll</span><span class="params">(struct pollfd *fds, <span class="keyword">nfds_t</span> nfds, <span class="keyword">int</span> timeout)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">pollfd</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span>   fd;         <span class="comment">/* file descriptor */</span></span><br><span class="line">    <span class="keyword">short</span> events;     <span class="comment">/* requested events */</span></span><br><span class="line">    <span class="keyword">short</span> revents;    <span class="comment">/* returned events */</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://scarecrow928.github.io/apue/thread/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Scarecrow">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ğŸ‘">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/apue/thread/" class="post-title-link" itemprop="url">çº¿ç¨‹åº“pthreadï¼ˆ1ï¼‰</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2021-06-16 11:42:45" itemprop="dateCreated datePublished" datetime="2021-06-16T11:42:45+08:00">2021-06-16</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">æ›´æ–°äº</span>
        <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-08-15 15:39:56" itemprop="dateModified" datetime="2021-08-15T15:39:56+08:00">2021-08-15</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/apue/" itemprop="url" rel="index"><span itemprop="name">apue</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="çº¿ç¨‹"><a href="#çº¿ç¨‹" class="headerlink" title="çº¿ç¨‹"></a>çº¿ç¨‹</h1><p>è¿™éƒ¨åˆ†APUEæ²¡æœ‰è¯¦ç»†ä»‹ç»ï¼Œèµ„æ–™æ¥è‡ªç½‘ç»œ</p>
<h2 id="çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸ"><a href="#çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸ"></a>çº¿ç¨‹ç”Ÿå‘½å‘¨æœŸ</h2><p><img src="/images/thread_lifecycle.jpg"></p>
<h2 id="è¿›ç¨‹ï¼Œçº¿ç¨‹ï¼Œåç¨‹"><a href="#è¿›ç¨‹ï¼Œçº¿ç¨‹ï¼Œåç¨‹" class="headerlink" title="è¿›ç¨‹ï¼Œçº¿ç¨‹ï¼Œåç¨‹"></a>è¿›ç¨‹ï¼Œçº¿ç¨‹ï¼Œåç¨‹</h2><ul>
<li><p>è¿›ç¨‹æ˜¯èµ„æºåˆ†é…çš„æœ€å°å•ä½ï¼Œä¾‹å¦‚å…¨å±€å˜é‡ã€ä»£ç æ®µã€å †ã€æ ˆç­‰ã€‚</p>
</li>
<li><p>çº¿ç¨‹æ˜¯ç³»ç»Ÿè°ƒåº¦çš„æœ€å°å•ä½ï¼Œçº¿ç¨‹ä¹‹é—´å…±äº«è¿›ç¨‹çš„èµ„æºã€‚</p>
</li>
<li><p>åç¨‹å¯ä»¥ç†è§£ä¸ºç”¨æˆ·å±‚çš„çº¿ç¨‹ï¼Œå…¶è°ƒåº¦ä¸ç”±æ“ä½œç³»ç»Ÿè¿›è¡Œè€Œç”±ç”¨æˆ·åº”ç”¨è¿›è¡Œï¼Œç›¸æ¯”çº¿ç¨‹æ›´åŠ è½»é‡ã€‚</p>
</li>
</ul>
<h1 id="pthreadä½¿ç”¨"><a href="#pthreadä½¿ç”¨" class="headerlink" title="pthreadä½¿ç”¨"></a>pthreadä½¿ç”¨</h1><p>ç¼–è¯‘ä½¿ç”¨äº†pthreadçš„ç¨‹åºæ—¶ï¼Œéœ€è¦è¾“å…¥<code>cc -pthread xxx.c</code></p>
<h2 id="pthread-t"><a href="#pthread-t" class="headerlink" title="pthread_t"></a>pthread_t</h2><p>çº¿ç¨‹æ ‡è¯†ç¬¦ï¼Œlinuxä¸Šå®ç°ä¸º<code>unsigned long</code>ï¼Œå¯ä»¥ç›´æ¥æ‰“å°</p>
<h2 id="pthread-create"><a href="#pthread-create" class="headerlink" title="pthread_create"></a>pthread_create</h2><p>åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œç«‹å³å¼€å§‹æ‰§è¡Œï¼Œå‚æ•°åˆ†åˆ«ä¸ºï¼š</p>
<ul>
<li>çº¿ç¨‹id</li>
<li>çº¿ç¨‹å±æ€§</li>
<li>ä»»åŠ¡å‡½æ•°</li>
<li>å‡½æ•°å‚æ•°ï¼Œå¯ä»¥ä¼ å…¥ç»“æ„ä½“è¡¨ç¤ºå¤šä¸ªå‚æ•°<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_create</span><span class="params">(<span class="keyword">pthread_t</span> *thread, <span class="keyword">const</span> <span class="keyword">pthread_attr_t</span> *attr,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">void</span> *(*start_routine) (<span class="keyword">void</span> *), <span class="keyword">void</span> *arg)</span></span>;</span><br></pre></td></tr></table></figure>
<h2 id="pthread-exit"><a href="#pthread-exit" class="headerlink" title="pthread_exit"></a>pthread_exit</h2>æ­£å¸¸é€€å‡ºçº¿ç¨‹ï¼Œä¹Ÿå¯ä»¥åœ¨çº¿ç¨‹é‡Œè¿”å›ä»¥ç»ˆæ­¢çº¿ç¨‹<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">pthread_exit</span><span class="params">(<span class="keyword">void</span> *retval)</span></span>;</span><br></pre></td></tr></table></figure>
<h2 id="çº¿ç¨‹åŒæ­¥æœºåˆ¶"><a href="#çº¿ç¨‹åŒæ­¥æœºåˆ¶" class="headerlink" title="çº¿ç¨‹åŒæ­¥æœºåˆ¶"></a>çº¿ç¨‹åŒæ­¥æœºåˆ¶</h2><h3 id="pthread-mutex-t"><a href="#pthread-mutex-t" class="headerlink" title="pthread_mutex_t"></a>pthread_mutex_t</h3>äº’æ–¥é”ï¼Œåªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹è·å¾—äº’æ–¥é”ï¼Œè‹¥è·å–ä¸åˆ°<code>lock</code>å°†é˜»å¡ï¼Œ<code>trylock</code>è¿”å›<code> EBUSY</code><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_mutex_init</span><span class="params">(<span class="keyword">pthread_mutex_t</span> *<span class="keyword">restrict</span> mutex,</span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="keyword">const</span> <span class="keyword">pthread_mutexattr_t</span> *<span class="keyword">restrict</span> attr)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœä¸ç”¨å †å†…å­˜ï¼Œå¯ä»¥è¿™æ ·åˆå§‹åŒ–</span></span><br><span class="line"><span class="keyword">pthread_mutex_t</span> mutex = PTHREAD_MUTEX_INITIALIZER;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_mutex_lock</span><span class="params">(<span class="keyword">pthread_mutex_t</span> *mutex)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_mutex_trylock</span><span class="params">(<span class="keyword">pthread_mutex_t</span> *mutex)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_mutex_unlock</span><span class="params">(<span class="keyword">pthread_mutex_t</span> *mutex)</span></span>;</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="pthread-rwlock-t"><a href="#pthread-rwlock-t" class="headerlink" title="pthread_rwlock_t"></a>pthread_rwlock_t</h3><p>è¯»å†™é”ï¼Œè¯»å†™ä¹‹é—´äº’æ–¥ï¼Œå†™ä¹‹é—´äº’æ–¥ï¼Œè¯»ä¹‹é—´ä¸äº’æ–¥ã€‚ä¹Ÿæœ‰<code>trylock</code> ç‰ˆæœ¬</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_rwlock_init</span><span class="params">(<span class="keyword">pthread_rwlock_t</span> *<span class="keyword">restrict</span> rwlock,</span></span></span><br><span class="line"><span class="params"><span class="function">        <span class="keyword">const</span> <span class="keyword">pthread_rwlockattr_t</span> *<span class="keyword">restrict</span> attr)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_rwlock_rdlock</span><span class="params">(<span class="keyword">pthread_rwlock_t</span> *rwlock)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_rwlock_wrlock</span><span class="params">(<span class="keyword">pthread_rwlock_t</span> *rwlock)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_rwlock_unlock</span><span class="params">(<span class="keyword">pthread_rwlock_t</span> *rwlock)</span></span>;</span><br></pre></td></tr></table></figure>
<h3 id="pthread-cond-t"><a href="#pthread-cond-t" class="headerlink" title="pthread_cond_t"></a><font color=red>pthread_cond_t</font></h3><p>æ¡ä»¶å˜é‡ï¼Œæœ‰ç‚¹ç±»ä¼¼è¿›ç¨‹æ§åˆ¶ä¸­çš„<code>sigsuspend</code>ï¼Œç­‰å¾…ç‰¹å®šä¿¡å·åˆ°è¾¾åç»§ç»­è¿è¡Œã€‚å‘é€ä¿¡å·å¯ä»¥å•æ’­ä¹Ÿå¯ä»¥å¹¿æ’­</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_cond_init</span><span class="params">(<span class="keyword">pthread_cond_t</span> *<span class="keyword">restrict</span> cond,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">const</span> <span class="keyword">pthread_condattr_t</span> *<span class="keyword">restrict</span> attr)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// çº¿ç¨‹å¼€å§‹ç­‰å¾…æ¡ä»¶åˆ°è¾¾</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_cond_wait</span><span class="params">(<span class="keyword">pthread_cond_t</span> *<span class="keyword">restrict</span> cond,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">pthread_mutex_t</span> *<span class="keyword">restrict</span> mutex)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‘é€ä¿¡å·ï¼Œå”¤é†’ç­‰å¾…æ¡ä»¶çš„çº¿ç¨‹</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_cond_signal</span><span class="params">(<span class="keyword">pthread_cond_t</span> *cond)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_cond_broadcast</span><span class="params">(<span class="keyword">pthread_cond_t</span> *cond)</span></span>;</span><br></pre></td></tr></table></figure>

<p>æ¡ä»¶å˜é‡éœ€è¦ç”¨<code>mutex</code>ä¿æŠ¤ï¼Œä¸€ä¸ªæ¨¡æ¿å†™æ³•ï¼š</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å…¨å±€mutexï¼Œç”¨äºåŒæ­¥å„çº¿ç¨‹ï¼Œä¿æŠ¤æ¡ä»¶</span></span><br><span class="line"><span class="keyword">pthread_mutex_t</span> mutex;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆ‘æ˜¯å¦å¯ä»¥è¡ŒåŠ¨çš„æ¡ä»¶</span></span><br><span class="line"><span class="keyword">pthread_cond_t</span> cond; </span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¨¡æ¿ </span></span><br><span class="line">pthread_mutex_lock(&amp;mutex);</span><br><span class="line"><span class="keyword">while</span> (<span class="comment">/* æ¡ä»¶æ²¡è¾¾æˆå— */</span>)</span><br><span class="line">    pthread_cond_wait(&amp;cond, &amp;mutex);</span><br><span class="line"><span class="comment">/* ä¸´ç•ŒåŒºä»£ç åœ¨æ­¤ */</span></span><br><span class="line">pthread_mutex_unlock(&amp;mutex);</span><br><span class="line"><span class="comment">// éä¸´ç•ŒåŒº</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ˜¯ä¸€ä¸ªç­‰å¾…æ¡ä»¶çš„çº¿ç¨‹çš„æ¨¡æ¿ï¼Œå½“çº¿ç¨‹å‘ç°è¿˜æ²¡è½®åˆ°å®ƒè¿è¡Œï¼Œä¼šæŒ‚èµ·ï¼Œç›´åˆ°æœ‰ä¸€ä¸ªå…¶ä»–çº¿ç¨‹å‘å‡ºäº†<code>pthread_cond_signal(&amp;cond)</code>ï¼Œå¹¶ä¸”<code>mutex</code>å¯ä»¥è·å–ï¼Œçº¿ç¨‹æ‰èƒ½ä»<code>pthread_cond_wait</code>è¿”å›ã€‚</p>
<p>è¿™ç§æ–¹å¼é¿å…äº†ä½¿ç”¨è‡ªæ—‹é”ã€‚è‹¥ä½¿ç”¨è‡ªæ—‹é”ï¼ŒCPUä¼šå› ä¸ºé‡å¤åˆ¤æ–­æ¡ä»¶è€Œä¸€ç›´å¤„äºé«˜è´Ÿè·çŠ¶æ€ï¼Œå¯¹ç³»ç»Ÿæ•´ä½“æ•ˆç‡å½±å“å¾ˆå¤§ã€‚</p>
<h3 id="pthread-barrier-t"><a href="#pthread-barrier-t" class="headerlink" title="pthread_barrier_t"></a>pthread_barrier_t</h3><p>å±éšœï¼Œå¿…é¡»åœ¨æŒ‡å®šä¸ªæ•°çº¿ç¨‹åˆ°è¾¾å±éšœåï¼Œè¿™äº›çº¿ç¨‹æ‰èƒ½ç»§ç»­è¿è¡Œï¼Œ<code>count</code>è¡¨ç¤ºçº¿ç¨‹æ•°</p>
<p>æ³¨æ„ï¼Œå±éšœå¯ä»¥é‡å¤ä½¿ç”¨ï¼Œæ¯æ¬¡éƒ½ä¼šç­‰å¾…<code>count</code>ä¸ªçº¿ç¨‹åˆ°è¾¾åæ”¾è¡Œï¼Œä¸éœ€è¦é‡å¤åˆå§‹åŒ–</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">pthread_barrier_init</span><span class="params">(<span class="keyword">pthread_barrier_t</span> *<span class="keyword">restrict</span> barrier,</span></span></span><br><span class="line"><span class="params"><span class="function">    <span class="keyword">const</span> <span class="keyword">pthread_barrierattr_t</span> *<span class="keyword">restrict</span> attr, <span class="keyword">unsigned</span> count)</span></span>;</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://scarecrow928.github.io/apue/signal2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Scarecrow">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ğŸ‘">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/apue/signal2/" class="post-title-link" itemprop="url">ä¿¡å·æœºåˆ¶ï¼ˆ2ï¼‰</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2021-06-15 12:22:09" itemprop="dateCreated datePublished" datetime="2021-06-15T12:22:09+08:00">2021-06-15</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">æ›´æ–°äº</span>
        <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-08-15 15:39:56" itemprop="dateModified" datetime="2021-08-15T15:39:56+08:00">2021-08-15</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/apue/" itemprop="url" rel="index"><span itemprop="name">apue</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="å¯é‡å…¥å‡½æ•°"><a href="#å¯é‡å…¥å‡½æ•°" class="headerlink" title="å¯é‡å…¥å‡½æ•°"></a>å¯é‡å…¥å‡½æ•°</h1><p>æŸäº›åº“å‡½æ•°ä¸­è°ƒç”¨äº†<code>malloc</code>ç­‰å‡½æ•°ï¼Œè‹¥åœ¨å…¶è°ƒç”¨æœŸé—´è¢«ä¿¡å·ä¸­æ–­ï¼Œå¯èƒ½å¼•èµ·å†…å­˜åˆ†é…é”™è¯¯ã€‚</p>
<p>å¯é‡å…¥å‡½æ•°æ˜¯å¼‚æ­¥ä¿¡å·å®‰å…¨çš„ï¼Œå®ƒä»¬è°ƒç”¨æ—¶ä¼šé˜»å¡ä¿¡å·ï¼Œä¸ä¼šå¼•èµ·å› ä¿¡å·äº§ç”Ÿçš„å®‰å…¨é—®é¢˜ã€‚</p>
<h1 id="signalç›¸å…³å‡½æ•°"><a href="#signalç›¸å…³å‡½æ•°" class="headerlink" title="signalç›¸å…³å‡½æ•°"></a>signalç›¸å…³å‡½æ•°</h1><h2 id="sigaction"><a href="#sigaction" class="headerlink" title="sigaction"></a>sigaction</h2><p>æ£€æŸ¥ã€ä¿®æ”¹æŸä¸ªä¿¡å·çš„åŠ¨ä½œï¼Œ<code>act</code>ä¸ºæ–°åŠ¨ä½œï¼Œå¯ä¸º<code>NULL</code>ï¼›<code>oldact</code>ä¸ºå·²å­˜åœ¨åŠ¨ä½œ</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;signal.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sigaction</span><span class="params">(<span class="keyword">int</span> signum, <span class="keyword">const</span> struct sigaction *act,</span></span></span><br><span class="line"><span class="params"><span class="function">                struct sigaction *oldact)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">sigaction</span> &#123;</span></span><br><span class="line">    <span class="keyword">void</span>     (*sa_handler)(<span class="keyword">int</span>);</span><br><span class="line">    <span class="keyword">void</span>     (*sa_sigaction)(<span class="keyword">int</span>, <span class="keyword">siginfo_t</span> *, <span class="keyword">void</span> *);</span><br><span class="line">    <span class="keyword">sigset_t</span>   sa_mask;</span><br><span class="line">    <span class="keyword">int</span>        sa_flags;</span><br><span class="line">    <span class="keyword">void</span>     (*sa_restorer)(<span class="keyword">void</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="setjmp-longjmp-ä¸-sigsetjmp-siglongjmp"><a href="#setjmp-longjmp-ä¸-sigsetjmp-siglongjmp" class="headerlink" title="setjmp longjmp ä¸ sigsetjmp siglongjmp"></a>setjmp longjmp ä¸ sigsetjmp siglongjmp</h2><p>è¿™å‡ ä¸ªå‡½æ•°éƒ½ç”¨äºéæœ¬åœ°è·³è½¬ï¼Œç±»ä¼¼<code>goto</code>ã€‚<code>long</code>å¤„çš„å‡½æ•°è°ƒç”¨åï¼Œä¼šä»<code>set</code>å¤„è¿”å›ã€‚</p>
<p><code>setjmp longjmp</code>ä¸æ¢å¤ä¿¡å·å±è”½å­—ï¼Œè€Œ<code>sigsetjmp siglongjmp</code>åœ¨<code>set</code>å¤„å…ˆä¿å­˜å½“å‰ä¿¡å·å±è”½å­—ï¼Œ<code>long</code>å›æ¥æ—¶ï¼Œæ¢å¤ä¹‹å‰ä¿å­˜çš„å±è”½å­—ã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;setjmp.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">setjmp</span><span class="params">(jmp_buf env)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sigsetjmp</span><span class="params">(sigjmp_buf env, <span class="keyword">int</span> savesigs)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">longjmp</span><span class="params">(jmp_buf env, <span class="keyword">int</span> val)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">siglongjmp</span><span class="params">(sigjmp_buf env, <span class="keyword">int</span> val)</span></span>;</span><br></pre></td></tr></table></figure>

<h2 id="sigsuspend"><a href="#sigsuspend" class="headerlink" title="sigsuspend"></a>sigsuspend</h2><p>åŸå­æ“ä½œï¼Œä¿å­˜å½“å‰ä¿¡å·å±è”½å­—ï¼Œè®¾ç½®ä¿¡å·å±è”½å­—<code>mask</code>å<code>pause</code>ï¼Œåœ¨æ¥æ”¶åˆ°ä¿¡å·å¹¶å¤„ç†å¥½åï¼Œæ¢å¤ä¿å­˜çš„å±è”½å­—å†è¿”å›ã€‚å®ƒä¸å­˜åœ¨ä¸´ç•ŒåŒºå†…æ”¶åˆ°ä¿¡å·çš„é—®é¢˜</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;signal.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">sigsuspend</span><span class="params">(<span class="keyword">const</span> <span class="keyword">sigset_t</span> *mask)</span></span>;</span><br></pre></td></tr></table></figure>

<h2 id="system"><a href="#system" class="headerlink" title="system"></a>system</h2><p>æ‰§è¡Œshellå‘½ä»¤ï¼Œæ³¨æ„<code>system</code>çš„è¿”å›å€¼<font color=red><strong>ä¸ä¸€å®š</strong></font>æ˜¯å‘½ä»¤è¿”å›å€¼ï¼Œå…¶å®è¿”å›å€¼æ˜¯shellè¿”å›å€¼ï¼Œåœ¨shellå¼‚å¸¸é€€å‡ºæ—¶ï¼Œä¼šè¿”å›<code>128 + ä¿¡å·å€¼</code></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://scarecrow928.github.io/apue/signal/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Scarecrow">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ğŸ‘">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/apue/signal/" class="post-title-link" itemprop="url">ä¿¡å·æœºåˆ¶ï¼ˆ1ï¼‰</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2021-06-12 08:53:49" itemprop="dateCreated datePublished" datetime="2021-06-12T08:53:49+08:00">2021-06-12</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">æ›´æ–°äº</span>
        <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-08-15 15:39:56" itemprop="dateModified" datetime="2021-08-15T15:39:56+08:00">2021-08-15</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/apue/" itemprop="url" rel="index"><span itemprop="name">apue</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="ä¿¡å·æœºåˆ¶"><a href="#ä¿¡å·æœºåˆ¶" class="headerlink" title="ä¿¡å·æœºåˆ¶"></a>ä¿¡å·æœºåˆ¶</h1><p>ä¿¡å·ç”¨äºå¤„ç†å¼‚æ­¥äº‹ä»¶ï¼Œä¾‹å¦‚ç”¨æˆ·è¾“å…¥<code>ctrl + c</code>ï¼Œè°ƒç”¨<code>kill</code>æ€æ­»ä¸€ä¸ªè¿›ç¨‹ç­‰</p>
<h2 id="æµç¨‹"><a href="#æµç¨‹" class="headerlink" title="æµç¨‹"></a>æµç¨‹</h2><h3 id="ç”Ÿæˆä¿¡å·"><a href="#ç”Ÿæˆä¿¡å·" class="headerlink" title="ç”Ÿæˆä¿¡å·"></a>ç”Ÿæˆä¿¡å·</h3><p>ç”Ÿæˆä¿¡å·çš„æ–¹æ³•æœ‰è®¸å¤šç§ï¼š</p>
<ul>
<li>ç”¨æˆ·åœ¨ç»ˆç«¯è¾“å…¥ï¼Œä¾‹å¦‚<code>ctrl + c</code>å‘å‰å°è¿›ç¨‹å‘é€<code>SIGINT</code></li>
<li>ç¡¬ä»¶å¼‚å¸¸ï¼Œç”±å†…æ ¸äº§ç”Ÿä¿¡å·ï¼Œä¾‹å¦‚æ— æ•ˆå†…å­˜è®¿é—®<code>SIGSEGV</code></li>
<li><code>kill(1)</code>å‘½ä»¤ä¸<code>kill(2)</code>å‡½æ•°ï¼Œåœ¨æƒé™å…è®¸æƒ…å†µä¸‹å¯ä»¥å‘å…¶ä»–è¿›ç¨‹å‘é€ä»»æ„ä¿¡å·</li>
<li>æŸäº›è½¯ä»¶æ¡ä»¶è¾¾æˆ</li>
</ul>
<h3 id="æ¥æ”¶ä¸å¤„ç†ä¿¡å·"><a href="#æ¥æ”¶ä¸å¤„ç†ä¿¡å·" class="headerlink" title="æ¥æ”¶ä¸å¤„ç†ä¿¡å·"></a>æ¥æ”¶ä¸å¤„ç†ä¿¡å·</h3><p>è¿›ç¨‹æ”¶åˆ°ä¿¡å·æ—¶ï¼Œå¿…é¡»é€‰æ‹©ä»¥ä¸‹ä¸‰ä¸ªè¡Œä¸ºä¹‹ä¸€ï¼š</p>
<ul>
<li>å¿½ç•¥ä¿¡å·ã€‚ä¾‹å¦‚é€šè¿‡<code>signal</code>å‡½æ•°æ³¨å†Œå¿½ç•¥<code>SIGINT</code>ï¼š<code>signal(SIGINT, SIG_IGN);</code></li>
<li>æ•è·ä¿¡å·ã€‚éœ€è¦é€šè¿‡<code>signal</code>å‡½æ•°æ³¨å†Œï¼Œå¯è‡ªå®šä¹‰å¤„ç†è¡Œä¸º</li>
<li>é»˜è®¤åŠ¨ä½œã€‚ä¸æ³¨å†Œè¡Œä¸ºï¼Œåˆ™åœ¨æ”¶åˆ°ä¿¡å·æ—¶æ‰§è¡Œç³»ç»Ÿé»˜è®¤åŠ¨ä½œã€‚æŸ¥çœ‹ç³»ç»Ÿé»˜è®¤è¡Œä¸ºï¼ŒLinuxï¼š<code>man 7 signal</code>ï¼ŒFreeBSDï¼š<code>man signal</code></li>
</ul>
<p>æœ‰ä¸¤ä¸ªä¸èƒ½å¿½ç•¥ä¹Ÿä¸èƒ½æ•è·çš„ä¿¡å·ï¼š</p>
<ul>
<li><code>SIGKILL</code>ï¼šç›´æ¥æ€æ­»è¿›ç¨‹ï¼Œè¿›ç¨‹æ— æ³•é€‰æ‹©å®‰å…¨é€€å‡ºï¼Œä¸èƒ½ç»§ç»­è¿è¡Œ</li>
<li><code>SIGSTOP</code>ï¼šåœæ­¢è¿è¡Œè¿›ç¨‹ï¼Œæ”¶åˆ°<code>SIGCONT</code>åç»§ç»­è¿è¡Œ</li>
</ul>
<h2 id="signalå‡½æ•°"><a href="#signalå‡½æ•°" class="headerlink" title="signalå‡½æ•°"></a><code>signal</code>å‡½æ•°</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Linux</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;signal.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">typedef</span> <span class="title">void</span> <span class="params">(*<span class="keyword">sighandler_t</span>)</span><span class="params">(<span class="keyword">int</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">sighandler_t</span> <span class="title">signal</span><span class="params">(<span class="keyword">int</span> signum, <span class="keyword">sighandler_t</span> handler)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// FreeBSDä¸­çš„å®šä¹‰ç›¸åŒï¼Œä¸è¿‡å±äºåº“å‡½æ•°ï¼Œè€ŒLinuxä¸­å±äºç³»ç»Ÿè°ƒç”¨</span></span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªå¤æ‚çš„å®šä¹‰ï¼Œæœ‰ä¸¤è¡Œï¼š</p>
<ol>
<li><code>typedef</code>å®šä¹‰äº†<code>sighandler_t</code>ç±»å‹ï¼Œå®ƒæ˜¯ï¼š<ul>
<li>ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆç±»å‹</li>
<li>å®ƒæŒ‡å‘çš„å‡½æ•°è¿”å›<code>void</code>ï¼Œæœ‰ä¸€ä¸ªå‚æ•°<code>int</code></li>
</ul>
</li>
<li>ä¸‹ä¸€è¡Œå®šä¹‰äº†<code>signal</code>å‡½æ•°ï¼š<ul>
<li>è¿”å›<code>sighandler_t</code>ç±»å‹ï¼Œå®ƒå°±æ˜¯ä¼ å…¥çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œæˆ–è€…<code>SIG_ERR</code></li>
<li>ä¸¤ä¸ªå‚æ•°ï¼Œ<code>int signum</code>ä»£è¡¨å¸Œæœ›å¤„ç†çš„ä¿¡å·ï¼Œ<code>sighandler_t handler</code>æ˜¯è‡ªå®šä¹‰çš„ä¿¡å·å¤„ç†å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å¿…é¡»æ˜¯è¿”å›<code>void</code>ï¼Œå‚æ•°<code>int</code></li>
</ul>
</li>
</ol>
<h2 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h2><p><code>kill</code>å‘½ä»¤é»˜è®¤ä¼šå‘å‡º<code>SIGTERM</code>ä¿¡å·ï¼Œå¦‚æœä¸æ³¨å†Œå¤„ç†å‡½æ•°ï¼Œåˆ™ç³»ç»Ÿé»˜è®¤è¡Œä¸ºæ˜¯ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">15  SIGTERM  terminate process    software termination signal</span><br></pre></td></tr></table></figure>

<p>ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç”¨<code>kill</code>æ€æ­»è¿›ç¨‹çš„è¿‡ç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li><code>kill</code>å‘æŒ‡å®šè¿›ç¨‹å‘å‡º<code>SIGTERM</code></li>
<li>è¿›ç¨‹æ¥å—åˆ°ä¿¡å·ï¼Œå¯»æ‰¾ä¿¡å·å¤„ç†å‡½æ•°</li>
<li>æ‰§è¡Œç³»ç»Ÿé»˜è®¤è¡Œä¸ºï¼Œç»ˆæ­¢è¿›ç¨‹</li>
</ol>
<p>å¦‚æœæ•è·äº†<code>SIGTERM</code>ï¼Œåˆ™å¯ä»¥åœ¨è¿›ç¨‹åœæ­¢å‰è¿›è¡Œä¿å­˜å·¥ä½œï¼Œå®‰å…¨é€€å‡ºï¼Œç”šè‡³å¯ä»¥é€‰æ‹©ä¸é€€å‡ºï¼Œä½†è¿™ä¸ç¬¦åˆ<code>SIGTERM</code>çš„æ„ä¹‰ã€‚</p>
<p>ä»£ç çš„å«ä¹‰æ˜¯ï¼šè¿›ç¨‹åœ¨æ¥å—åˆ°ä¸¤æ¬¡<code>SIGTERM</code>åï¼Œæ‰æ­£å¸¸é€€å‡ºã€‚</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;signal.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">int</span> c = <span class="number">2</span>;</span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">sigterm_handler</span><span class="params">(<span class="keyword">int</span> signo)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;handle signal: %d\n&quot;</span>, signo);</span><br><span class="line">    c--;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span></span></span><br><span class="line"><span class="function"><span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    signal(SIGTERM, &amp;sigterm_handler);</span><br><span class="line">    <span class="keyword">while</span> (c &gt; <span class="number">0</span>)</span><br><span class="line">        pause();</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;exit\n&quot;</span>);</span><br><span class="line">    <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è®©è¿›ç¨‹åå°è¿è¡Œï¼Œé€šè¿‡<code>kill</code>å‘é€ä¸¤æ¬¡<code>SIGTERM</code>ï¼Œç­‰å¾…å…¶æ­£å¸¸é€€å‡º</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> ./a.out &amp;</span><br><span class="line">[<span class="number">1</span>] <span class="number">2587</span></span><br><span class="line"><span class="variable">$</span> <span class="built_in">kill</span> <span class="number">2587</span></span><br><span class="line"><span class="variable">$</span> handle signal: <span class="number">15</span></span><br><span class="line"></span><br><span class="line"><span class="variable">$</span> <span class="built_in">kill</span> <span class="number">2587</span></span><br><span class="line">handle signal: <span class="number">15</span></span><br><span class="line"><span class="keyword">exit</span></span><br><span class="line"><span class="variable">$</span></span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://scarecrow928.github.io/apue/fork/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Scarecrow">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="ğŸ‘">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/apue/fork/" class="post-title-link" itemprop="url">fork exec</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">å‘è¡¨äº</span>

      <time title="åˆ›å»ºæ—¶é—´ï¼š2021-06-09 03:34:58" itemprop="dateCreated datePublished" datetime="2021-06-09T03:34:58+08:00">2021-06-09</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">æ›´æ–°äº</span>
        <time title="ä¿®æ”¹æ—¶é—´ï¼š2021-08-15 15:39:56" itemprop="dateModified" datetime="2021-08-15T15:39:56+08:00">2021-08-15</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">åˆ†ç±»äº</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/apue/" itemprop="url" rel="index"><span itemprop="name">apue</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="fork"><a href="#fork" class="headerlink" title="fork"></a><code>fork</code></h1><h2 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Linux</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;sys/types.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">pid_t</span> <span class="title">fork</span><span class="params">(<span class="keyword">void</span>)</span></span>;</span><br></pre></td></tr></table></figure>
<h2 id="çˆ¶è¿›ç¨‹ä¸å­è¿›ç¨‹çš„å…³ç³»"><a href="#çˆ¶è¿›ç¨‹ä¸å­è¿›ç¨‹çš„å…³ç³»" class="headerlink" title="çˆ¶è¿›ç¨‹ä¸å­è¿›ç¨‹çš„å…³ç³»"></a>çˆ¶è¿›ç¨‹ä¸å­è¿›ç¨‹çš„å…³ç³»</h2><ol>
<li><code>fork</code>å‡½æ•°çˆ¶è¿›ç¨‹è¿”å›å­è¿›ç¨‹pidï¼Œå­è¿›ç¨‹è¿”å›<code>0</code></li>
<li>çˆ¶è¿›ç¨‹ä¸å­è¿›ç¨‹çš„å…¨å±€å˜é‡ä¸å…±äº«ã€‚å‡ºäºæ•ˆç‡ï¼Œå˜é‡æ˜¯â€œå†™æ—¶å¤åˆ¶â€çš„ï¼Œçˆ¶å­ä»»æ„è¿›ç¨‹å†™å…¥å˜é‡å‰ï¼Œåˆ›å»ºå­˜å‚¨åŒºå‰¯æœ¬</li>
<li>çˆ¶è¿›ç¨‹ä¸å­è¿›ç¨‹çš„æ–‡ä»¶æè¿°ç¬¦ä¹Ÿæ˜¯å¤åˆ¶çš„ï¼Œåœ¨çˆ¶è¿›ç¨‹æ‰“å¼€æ–‡ä»¶å<code>fork</code>ï¼Œåˆ™å­è¿›ç¨‹ä¹Ÿå·²æ‰“å¼€äº†æ–‡ä»¶ï¼Œéœ€è¦åŒæ­¥æªæ–½é˜²æ­¢å®ƒä»¬åŒæ—¶è¯»å†™æ–‡ä»¶</li>
<li>å­è¿›ç¨‹ç»§æ‰¿äº†å®é™…idã€æœ‰æ•ˆidï¼Œå·¥ä½œç›®å½•ç­‰ç­‰</li>
</ol>
<h1 id="exec"><a href="#exec" class="headerlink" title="exec"></a><code>exec</code></h1><h2 id="å®šä¹‰-1"><a href="#å®šä¹‰-1" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="keyword">extern</span> <span class="keyword">char</span> **environ;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">execl</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *pathname, <span class="keyword">const</span> <span class="keyword">char</span> *arg, ...</span></span></span><br><span class="line"><span class="params"><span class="function">                <span class="comment">/* (char  *) NULL */</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">execlp</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *file, <span class="keyword">const</span> <span class="keyword">char</span> *arg, ...</span></span></span><br><span class="line"><span class="params"><span class="function">                <span class="comment">/* (char  *) NULL */</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">execle</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *pathname, <span class="keyword">const</span> <span class="keyword">char</span> *arg, ...</span></span></span><br><span class="line"><span class="params"><span class="function">                <span class="comment">/*, (char *) NULL, char *const envp[] */</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">execv</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *pathname, <span class="keyword">char</span> *<span class="keyword">const</span> argv[])</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">execvp</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *file, <span class="keyword">char</span> *<span class="keyword">const</span> argv[])</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">execvpe</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *file, <span class="keyword">char</span> *<span class="keyword">const</span> argv[],</span></span></span><br><span class="line"><span class="params"><span class="function">                <span class="keyword">char</span> *<span class="keyword">const</span> envp[])</span></span>;</span><br></pre></td></tr></table></figure>
<h2 id="è¯´æ˜"><a href="#è¯´æ˜" class="headerlink" title="è¯´æ˜"></a>è¯´æ˜</h2><ol>
<li><code>pathname</code>ä¸ºè·¯å¾„åï¼Œç»å¯¹ç›¸å¯¹å‡å¯ï¼›<code>file</code>ä¸ºæ–‡ä»¶åï¼Œè‹¥å«<code>&quot;/&quot;</code>å­—ç¬¦ï¼Œè§†ä¸ºæ–‡ä»¶åï¼Œå¦åˆ™åœ¨<code>PATH</code>ç¯å¢ƒå˜é‡ä¸­è·¯å¾„æœç´¢å¯æ‰§è¡Œæ–‡ä»¶æˆ–shellè„šæœ¬</li>
<li>ä¸<code>fork</code>ä¸åŒï¼Œ<code>exec</code>å¹¶ä¸äº§ç”Ÿæ–°è¿›ç¨‹ï¼Œå®ƒå°†åŸå§‹è¿›ç¨‹çš„ä»£ç æ®µã€å…¨å±€å˜é‡æ•°æ®æ®µã€å †ã€æ ˆæ›¿æ¢ä¸ºæ–°è¿›ç¨‹ï¼Œæ–°è¿›ç¨‹<code>pid</code>å¹¶ä¸ä¼šæ”¹å˜</li>
</ol>
<h2 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// t18.cï¼Œå¯æ‰§è¡Œæ–‡ä»¶ä¸ºmypidï¼Œç”±execå¯åŠ¨è¿™ä¸ªè¿›ç¨‹</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span></span></span><br><span class="line"><span class="function"><span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;my pid: %d\n&quot;</span>, getpid());</span><br><span class="line">    <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// t19.cï¼ŒåŸå§‹è¿›ç¨‹ï¼Œå°†å¯åŠ¨./mypid</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span></span></span><br><span class="line"><span class="function"><span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;before exec, my pid: %d\n&quot;</span>, getpid());</span><br><span class="line">    execl(<span class="string">&quot;./mypid&quot;</span>, <span class="literal">NULL</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;this line\n&quot;</span>);</span><br><span class="line">    <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç¼–è¯‘ï¼Œè¿è¡Œï¼š</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$</span> cc t18.c <span class="literal">-o</span> mypid</span><br><span class="line"><span class="variable">$</span> cc t19.c</span><br><span class="line"><span class="variable">$</span> ./a.out </span><br><span class="line">before exec, my pid: <span class="number">1520</span></span><br><span class="line">my pid: <span class="number">1520</span></span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="ä¸‹ä¸€é¡µ"></i></a>
  </nav>
<script src="/js/comments.js"></script>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Scarecrow</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> å¼ºåŠ›é©±åŠ¨
  </div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  






  





</body>
</html>
